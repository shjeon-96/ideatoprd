---
phase: 05-prd-generation
plan: 02
type: execute
depends_on: ["05-01"]
files_modified:
  - src/features/prd-generation/lib/prompts/templates/saas.ts
  - src/features/prd-generation/lib/prompts/templates/mobile.ts
  - src/features/prd-generation/lib/prompts/templates/marketplace.ts
  - src/features/prd-generation/lib/prompts/templates/extension.ts
  - src/features/prd-generation/lib/prompts/templates/ai-wrapper.ts
  - src/features/prd-generation/lib/prompts/templates/index.ts
  - src/features/prd-generation/lib/prompts/system.ts
---

<objective>
PRD 템플릿 5종 프롬프트 작성

Purpose: 제품 유형별 맞춤 PRD 생성을 위한 few-shot 예제 및 특화 지시사항 구축
Output: 5개 템플릿 (SaaS, Mobile, Marketplace, Extension, AI-Wrapper) 프롬프트 모듈
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-plan.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05-prd-generation/05-RESEARCH.md
@.planning/phases/05-prd-generation/05-01-SUMMARY.md

# 시스템 프롬프트 기반
@src/features/prd-generation/lib/prompts/system.ts

# DB enum 타입 참고
@src/entities/index.ts

**Established patterns:**
- XML 태그 구조화 프롬프트 (Claude 권장)
- Few-shot examples 패턴
</context>

<tasks>

<task type="auto">
  <name>Task 1: SaaS 및 Mobile 앱 템플릿</name>
  <files>src/features/prd-generation/lib/prompts/templates/saas.ts, src/features/prd-generation/lib/prompts/templates/mobile.ts</files>
  <action>
    1. src/features/prd-generation/lib/prompts/templates/saas.ts:
    ```typescript
    export const SAAS_TEMPLATE = `
    <template_context>
    This is a SaaS (Software as a Service) product.
    Focus on: subscription models, user onboarding, B2B/B2C considerations, scalability.
    </template_context>

    <additional_sections>
    - Pricing Strategy (freemium, tiered, usage-based)
    - Customer Acquisition Strategy
    - Churn Prevention Measures
    - Integration Capabilities (API, webhooks)
    </additional_sections>

    <example>
    <idea>AI 기반 이력서 분석 서비스</idea>
    <prd_excerpt>
    ## 1. Executive Summary
    이력서를 업로드하면 AI가 분석하여 ATS 통과율과 개선점을 제안하는 SaaS.
    타겟: 구직자, 커리어 코치, HR 담당자

    ## 4. Requirements
    ### Functional (Must Have)
    - 이력서 업로드 (PDF, DOCX)
    - AI 분석 결과 대시보드
    - 개선 제안 리스트

    ### Pricing
    - Free: 월 3회 분석
    - Pro ($9.99/월): 무제한 분석 + 상세 리포트
    - Team ($29.99/월): 팀 관리 + API 접근
    </prd_excerpt>
    </example>
    `;
    ```

    2. src/features/prd-generation/lib/prompts/templates/mobile.ts:
    ```typescript
    export const MOBILE_TEMPLATE = `
    <template_context>
    This is a Mobile Application (iOS/Android).
    Focus on: UX patterns, offline capability, push notifications, app store optimization.
    </template_context>

    <additional_sections>
    - Platform Strategy (iOS first, Android first, cross-platform)
    - Offline Functionality
    - Push Notification Strategy
    - App Store Optimization (ASO)
    - Device Permissions Required
    </additional_sections>

    <example>
    <idea>습관 추적 앱</idea>
    <prd_excerpt>
    ## 1. Executive Summary
    매일 습관을 기록하고 통계로 시각화하는 iOS/Android 앱.
    게이미피케이션으로 동기 부여.

    ## 7. Technical Considerations
    - Platform: Flutter (cross-platform)
    - Local storage: SQLite (offline-first)
    - Push: Firebase Cloud Messaging
    - Permissions: Notifications, Health (optional)
    </prd_excerpt>
    </example>
    `;
    ```

    주의:
    - 한국어 예제 포함
    - 템플릿별 특화 섹션 명시
  </action>
  <verify>TypeScript import 에러 없음</verify>
  <done>SaaS, Mobile 템플릿 2개 생성 완료</done>
</task>

<task type="auto">
  <name>Task 2: Marketplace, Extension, AI-Wrapper 템플릿</name>
  <files>src/features/prd-generation/lib/prompts/templates/marketplace.ts, src/features/prd-generation/lib/prompts/templates/extension.ts, src/features/prd-generation/lib/prompts/templates/ai-wrapper.ts</files>
  <action>
    1. marketplace.ts (양면 플랫폼):
    ```typescript
    export const MARKETPLACE_TEMPLATE = `
    <template_context>
    This is a Two-Sided Marketplace connecting buyers and sellers.
    Focus on: trust & safety, matching algorithm, transaction flow, chicken-egg problem.
    </template_context>

    <additional_sections>
    - Supply & Demand Strategy
    - Trust & Safety Mechanisms
    - Fee Structure (commission model)
    - Dispute Resolution Process
    </additional_sections>

    <example>
    <idea>프리랜서 디자이너 마켓플레이스</idea>
    <prd_excerpt>
    ## Chicken-Egg Strategy
    Phase 1: 디자이너 100명 확보 (무료 프로필)
    Phase 2: 소규모 기업 타겟 마케팅
    Phase 3: 성공 사례 기반 바이럴

    ## Fee Structure
    - 기본 수수료: 거래액의 10%
    - 반복 고객 할인: 7%
    </prd_excerpt>
    </example>
    `;
    ```

    2. extension.ts (브라우저/앱 확장):
    ```typescript
    export const EXTENSION_TEMPLATE = `
    <template_context>
    This is a Browser Extension or App Plugin.
    Focus on: host app integration, permissions, update mechanism, store policies.
    </template_context>

    <additional_sections>
    - Host Application Requirements
    - Permission Scope (minimal viable)
    - Store Submission Guidelines (Chrome/Firefox/Safari)
    - Update & Migration Strategy
    </additional_sections>

    <example>
    <idea>웹페이지 요약 Chrome 확장</idea>
    <prd_excerpt>
    ## Permissions
    - activeTab: 현재 탭 콘텐츠 읽기 (필수)
    - storage: 설정 저장 (필수)
    - clipboardWrite: 요약 복사 (선택)

    ## Store Compliance
    - Chrome Web Store 정책 준수
    - 개인정보 처리방침 필수
    </prd_excerpt>
    </example>
    `;
    ```

    3. ai-wrapper.ts (AI 기반 서비스):
    ```typescript
    export const AI_WRAPPER_TEMPLATE = `
    <template_context>
    This is an AI-Wrapper product built on top of LLMs (GPT, Claude, etc.).
    Focus on: prompt engineering, cost optimization, rate limiting, differentiation.
    </template_context>

    <additional_sections>
    - AI Model Selection & Fallback Strategy
    - Cost per Request Analysis
    - Prompt Engineering Strategy
    - Differentiation from Raw API Access
    - Content Moderation & Safety
    </additional_sections>

    <example>
    <idea>AI 블로그 글 작성 도우미</idea>
    <prd_excerpt>
    ## AI Strategy
    - Primary: Claude 3.5 Haiku (속도, 비용)
    - Fallback: GPT-4o-mini (가용성)
    - Cost: ~$0.002/요청 (1000 토큰 기준)

    ## Differentiation
    - 한국어 최적화 프롬프트
    - SEO 키워드 자동 삽입
    - 톤앤매너 커스터마이징
    </prd_excerpt>
    </example>
    `;
    ```
  </action>
  <verify>TypeScript import 에러 없음</verify>
  <done>Marketplace, Extension, AI-Wrapper 템플릿 3개 생성 완료</done>
</task>

<task type="auto">
  <name>Task 3: 템플릿 통합 및 getSystemPrompt 업데이트</name>
  <files>src/features/prd-generation/lib/prompts/templates/index.ts, src/features/prd-generation/lib/prompts/system.ts, src/features/prd-generation/index.ts</files>
  <action>
    1. templates/index.ts (barrel export):
    ```typescript
    export { SAAS_TEMPLATE } from './saas';
    export { MOBILE_TEMPLATE } from './mobile';
    export { MARKETPLACE_TEMPLATE } from './marketplace';
    export { EXTENSION_TEMPLATE } from './extension';
    export { AI_WRAPPER_TEMPLATE } from './ai-wrapper';

    import { SAAS_TEMPLATE } from './saas';
    import { MOBILE_TEMPLATE } from './mobile';
    import { MARKETPLACE_TEMPLATE } from './marketplace';
    import { EXTENSION_TEMPLATE } from './extension';
    import { AI_WRAPPER_TEMPLATE } from './ai-wrapper';
    import type { PRDTemplate } from '@/src/entities';

    export const TEMPLATE_MAP: Record<PRDTemplate, string> = {
      saas: SAAS_TEMPLATE,
      mobile: MOBILE_TEMPLATE,
      marketplace: MARKETPLACE_TEMPLATE,
      extension: EXTENSION_TEMPLATE,
      'ai-wrapper': AI_WRAPPER_TEMPLATE,
    };
    ```

    2. system.ts 업데이트 - getSystemPrompt 함수 완성:
    ```typescript
    import { TEMPLATE_MAP } from './templates';
    import type { PRDTemplate } from '@/src/entities';

    export const getSystemPrompt = (templateType: PRDTemplate): string => {
      const templatePrompt = TEMPLATE_MAP[templateType] || '';
      return `${PRD_SYSTEM_PROMPT}\n\n${templatePrompt}`;
    };
    ```

    3. src/features/prd-generation/index.ts 업데이트:
    ```typescript
    export { PRD_SYSTEM_PROMPT, getSystemPrompt } from './lib/prompts/system';
    export { TEMPLATE_MAP } from './lib/prompts/templates';
    ```

    주의:
    - PRDTemplate enum은 entities에서 import
    - ai-wrapper는 하이픈 포함 (DB enum과 일치)
  </action>
  <verify>npm run build 성공, getSystemPrompt('saas') 호출 가능</verify>
  <done>5개 템플릿 통합, getSystemPrompt 함수 완성</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] 5개 템플릿 파일 모두 존재
- [ ] templates/index.ts에서 TEMPLATE_MAP export
- [ ] getSystemPrompt('saas') 등 모든 템플릿 타입 작동
- [ ] npm run build 성공
</verification>

<success_criteria>
- 5개 PRD 템플릿 프롬프트 완성 (SaaS, Mobile, Marketplace, Extension, AI-Wrapper)
- TEMPLATE_MAP으로 타입 안전하게 접근 가능
- 시스템 프롬프트 + 템플릿 결합 로직 완성
</success_criteria>

<output>
After completion, create `.planning/phases/05-prd-generation/05-02-SUMMARY.md`
</output>
