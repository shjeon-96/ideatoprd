---
phase: 01-foundation
plan: 02
type: execute
depends_on: ['01-01']
files_modified:
  [
    src/app/,
    src/widgets/,
    src/features/,
    src/entities/,
    src/shared/,
    .env.example,
    .gitignore,
    .prettierrc,
    eslint.config.mjs,
    package.json,
  ]
---

<objective>
Create FSD directory structure, environment template, and code formatting setup.

Purpose: Establish Feature-Sliced Design architecture and development standards.
Output: FSD folder structure with index files, .env.example, Prettier configuration.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-plan.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation/01-01-SUMMARY.md

**Tech stack available:**

- React Compiler enabled
- Vitest + Testing Library configured

**FSD 구조 (from PROJECT.md):**

```
src/
├── app/           # Next.js App Router (라우팅만)
├── widgets/       # 페이지 구성 블록 (Header, Sidebar)
├── features/      # 비즈니스 기능 (generate-prd, buy-credits)
├── entities/      # 도메인 엔티티 (user, prd, purchase)
├── shared/        # 공통 유틸, UI, API 클라이언트
└── pages/         # 페이지별 컴포넌트 조합
```

**Blockers from STATE.md:**

- firebase-debug.log 보안 이슈 (이번 plan에서 수정)
  </context>

<tasks>

<task type="auto">
  <name>Task 1: Create FSD directory structure</name>
  <files>src/widgets/index.ts, src/features/index.ts, src/entities/index.ts, src/shared/index.ts, src/shared/ui/index.ts, src/shared/lib/index.ts, src/shared/api/index.ts</files>
  <action>
Create FSD directories with barrel exports:

1. src/widgets/index.ts - empty export (future: Header, Sidebar, Footer)
2. src/features/index.ts - empty export (future: generate-prd, buy-credits)
3. src/entities/index.ts - empty export (future: user, prd, purchase)
4. src/shared/index.ts - re-export from subdirectories
5. src/shared/ui/index.ts - empty export (future: Button, Card, Input)
6. src/shared/lib/index.ts - empty export (future: utils, helpers)
7. src/shared/api/index.ts - empty export (future: API clients)

Each index.ts should have a comment explaining the layer's purpose.
Do NOT create src/app/ or src/pages/ - app/ already exists at root level for Next.js App Router.

Note: FSD "pages" layer conflicts with Next.js App Router. We use app/ at root for routing, and FSD layers (widgets, features, entities, shared) under src/.
</action>
<verify>ls -la src/ shows widgets, features, entities, shared directories</verify>
<done>FSD directories created with index.ts barrel exports and purpose comments</done>
</task>

<task type="auto">
  <name>Task 2: Create environment template and fix security issues</name>
  <files>.env.example, .env.local, .gitignore</files>
  <action>
1. Create .env.example with placeholder variables:
   ```
   # Supabase
   NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
   NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key
   SUPABASE_SERVICE_ROLE_KEY=your_service_role_key

# Auth

NEXTAUTH_SECRET=your_nextauth_secret
NEXTAUTH_URL=http://localhost:3000

# Google OAuth

GOOGLE_CLIENT_ID=your_google_client_id
GOOGLE_CLIENT_SECRET=your_google_client_secret

# Anthropic

ANTHROPIC_API_KEY=your_anthropic_api_key

# Lemon Squeezy

LEMONSQUEEZY_API_KEY=your_lemonsqueezy_api_key
LEMONSQUEEZY_WEBHOOK_SECRET=your_webhook_secret

````

2. Create .env.local with same structure but empty values (for local dev)

3. Update .gitignore to add:
- firebase-debug.log
- .env.local
- .env*.local

Security fix: firebase-debug.log is currently tracked - add to .gitignore.
</action>
<verify>cat .gitignore | grep firebase-debug.log shows the entry</verify>
<done>.env.example created, .gitignore updated with firebase-debug.log and env files</done>
</task>

<task type="auto">
<name>Task 3: Configure Prettier with ESLint integration</name>
<files>.prettierrc, .prettierignore, eslint.config.mjs, package.json</files>
<action>
1. Install Prettier and ESLint plugin:
npm install -D prettier eslint-config-prettier

2. Create .prettierrc:
```json
{
  "semi": true,
  "singleQuote": true,
  "tabWidth": 2,
  "trailingComma": "es5",
  "printWidth": 80
}
````

3. Create .prettierignore:

   ```
   node_modules
   .next
   build
   coverage
   ```

4. Update eslint.config.mjs:
   - Add eslint-config-prettier to extends (must be LAST to override conflicting rules)

5. Add npm scripts:
   - "format": "prettier --write ."
   - "format:check": "prettier --check ."

Do NOT add eslint-plugin-prettier (causes performance issues). Use eslint-config-prettier to disable conflicting rules only.
</action>
<verify>npm run format:check runs without errors, npm run lint passes</verify>
<done>Prettier configured, ESLint integration set up, format scripts available</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] FSD directories exist: src/widgets, src/features, src/entities, src/shared
- [ ] .env.example contains all required variables
- [ ] .gitignore includes firebase-debug.log
- [ ] `npm run format:check` executes
- [ ] `npm run lint` passes
- [ ] `npm run build` still succeeds
</verification>

<success_criteria>

- FSD directory structure created with index.ts files
- .env.example template with all MVP variables
- firebase-debug.log added to .gitignore (security fix)
- Prettier configured and integrated with ESLint
- All format/lint scripts working
- Phase 1 complete
  </success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-02-SUMMARY.md`
</output>
